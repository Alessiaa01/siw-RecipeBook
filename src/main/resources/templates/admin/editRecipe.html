<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Modifica ' + ${recipe.title}">Modifica Ricetta</title>
    <link rel="stylesheet" href="/css/editRecipe.css"/>
</head>
<body>

    <header>
        <a href="/recipes">‚Üê Torna alle ricette</a>
    </header>

    <h1 th:text="'Modifica: ' + ${recipe.title}">Modifica Ricetta</h1>

    <!-- FORM MODIFICA RICETTA -->
    <form th:action="@{'/admin/recipe/' + ${recipe.id} + '/update'}" th:object="${recipe}" method="post">
        <label>Titolo:</label><br>
        <input type="text" th:field="*{title}" /><br><br>

        <label>Descrizione:</label><br>
        <textarea th:field="*{description}" rows="3" cols="50"></textarea><br><br>

        <label>Procedimento:</label><br>
        <textarea th:field="*{procedure}" rows="5" cols="50"></textarea><br><br>

        <label>Tempo di preparazione (minuti):</label><br>
        <input type="number" th:field="*{preparationTime}" /><br><br>
		
		<label>Tempo di cottura (minuti):</label><br>
		<input type="number" th:field="*{cookingTime}" /><br><br>
		

        <label>Difficolt√†:</label><br>
        <input type="text" th:field="*{difficulty}" /><br><br>

        <label>Porzioni:</label><br>
        <input type="number" th:field="*{servings}" /><br><br>

        <label>Categoria:</label><br>
        <select th:field="*{category}">
            <option value="Antipasto">Antipasto</option>
            <option value="Primo">Primo</option>
            <option value="Secondo">Secondo</option>
            <option value="Dolce">Dolce</option>
        </select><br><br>
		<label>Tag (es. vegetariana, vegana...):</label><br>
		        <input type="text" th:field="*{tags}" placeholder="Separati da virgola" /><br><br>

		        <label>URL Immagine:</label><br>
		        <input type="text" th:field="*{imageUrl}" placeholder="Inserisci l'URL dell'immagine..." /><br><br>
		        
		        <button type="submit">üíæ Salva modifiche</button>
		    </form>

		    <hr>

    

    <!-- INGREDIENTI ESISTENTI -->
    <h2>Ingredienti</h2>
    <ul>
        <li th:each="ingredient : ${recipe.ingredients}">
            <span th:text="${ingredient.name}">Ingrediente</span> -
            <span th:text="${ingredient.quantity}">Quantit√†</span> 
            <span th:text="${ingredient.unit}">Unit√†</span>
            
            <!-- Bottone Rimuovi -->
            <form th:action="@{'/admin/recipe/' + ${recipe.id} + '/ingredient/' + ${ingredient.id} + '/remove'}"
                  method="post" style="display:inline;">
                <button type="submit">‚ùå Rimuovi</button>
            </form>
        </li>
    </ul>

    <!-- FORM AGGIUNTA NUOVO INGREDIENTE -->
    <h3>Aggiungi nuovo ingrediente</h3>
	<form th:action="@{'/admin/recipe/' + ${recipe.id} + '/ingredient/add'}" th:object="${ingredient}" method="post">
	    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
	    <label>Nome:</label>
	    <input type="text" th:field="*{name}" required/><br>
	    <label>Quantit√†:</label>
	    <input type="text" th:field="*{quantity}" required/><br>
	    <label>Unit√†:</label>
	    <input type="text" th:field="*{unit}" /><br>
	    <button type="submit">‚ûï Aggiungi Ingrediente</button>
	</form>


</body>
</html>
