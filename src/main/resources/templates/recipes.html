<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"> 
<head>
    <meta charset="UTF-8">
    <title>Elenco ricette</title>
    <link rel="stylesheet" href="/css/recipes.css" />
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="magic-background"></div>

    <header>
        <div class="header-content-wrapper">
        
            <div sec:authorize="hasAuthority('ADMIN')" class="admin-link-header-left">
                <a th:href="@{/admin/manageRecipes}" class="action-manage">
                    <i class="fa-solid fa-crown"></i> Gestione Admin
                </a>
            </div>
            
            <div class="user-actions-right">
                <div th:if="${userDetails}">
                    <span class="chef-name">âœ¨ Chef <span th:text="${userDetails.username}"></span></span>
                    <a href="/logout">Logout</a>
                </div>
                <div th:unless="${userDetails}">
                    <a href="/login">Login</a>
                </div>
            </div>
        </div>
    </header>

	<div class="logo-container">
	    <a href="/">
	        <img src="/images/logo2.png" class="main-logo" alt="Logo"/>
	    </a>  
	</div>

    <h1 class="main-title">ELENCO RICETTE</h1>
    
    <div class="action-bar-wrapper">
        
        <div class="search-container">
            <form th:action="@{/searchRecipes}" method="get" class="elegant-search-form">
                
                <div class="search-field">
                    <input type="text" name="title" placeholder="ðŸ” Cerca per Titolo..." />
                </div>

                <div class="search-field" style="margin-left: 20px;">
                   <input type="text" name="ingredient" placeholder="ðŸŒ¾ Cerca per Ingrediente..." />
                </div>
                
                <button type="submit" class="search-button">CERCA</button>
            </form>
        </div>
        
        <div sec:authorize="hasAuthority('ADMIN')" class="admin-actions-top">
            <a th:href="@{/admin/formNewRecipe}" class="action-add-new">âž• Aggiungi una nuova Ricetta</a>
        </div>
    
    </div>

    <div th:if="${#lists.isEmpty(recipes)}">
        <p style="text-align: center;">Nessuna ricetta Ã¨ stata ancora trovata.</p>
    </div>

    <ul class="recipe-cards-list">
		
        <li th:each="recipe : ${recipes}" class="recipe-card">
            
            <div class="card-image">
                <img th:src="${recipe.imageUrl} ? ${recipe.imageUrl} : '/images/placeholder-piatto.jpg'" 
                     th:alt="'Immagine di ' + ${recipe.title}"/>
            </div>
            
            <div class="card-content">
                <a th:href="@{/recipe/{id}(id=${recipe.id})}" th:text="${recipe.title}" class="recipe-title">Titolo Ricetta</a>
                
                <p class="recipe-description" th:text="${recipe.description}">Breve descrizione della ricetta...</p>

                <div class="card-metadata-inline">
                    <p>
                        <i class="fa-regular fa-clock icon-gold"></i> 
                        Tempo: <span th:text="${recipe.preparationTime}">0</span> min
                    </p>
                    
                    <p>
                        <i class="fa-solid fa-fire-burner icon-gold"></i> 
                        Cottura: <span th:text="${recipe.cookingTime}">0</span> min
                    </p>
                    
                    <p>
                        <i class="fa-solid fa-star icon-gold"></i> 
                        DifficoltÃ : <span th:text="${recipe.difficulty}">Facile</span>
                    </p>
                    
                    <p>
                        <i class="fa-solid fa-utensils icon-gold"></i> 
                        Porzioni: <span th:text="${recipe.servings}">0</span>
                    </p>
                    
                    <p>
                        <i class="fa-solid fa-bookmark icon-gold"></i> 
                        Categoria: <span th:text="${recipe.category}">Categoria</span>
                    </p>
                    
                    <p>
                        <i class="fa-solid fa-tags icon-gold"></i> 
                        Tag: <span th:text="${recipe.tags}">Tag</span>
                    </p>
                </div>
            </div>
            
        </li>
    </ul>
</body>
</html>