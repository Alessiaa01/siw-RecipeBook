<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Nuova Ricetta</title>
    <link rel="stylesheet" href="/css/stile.css" />
</head>

<body>
    <header>
        <div th:if="${userDetails}">
            <span th:text="${userDetails.username}"></span>
            <a href="/logout">Logout</a>
        </div>
        <div th:unless="${userDetails}">
            <a href="/login">Login</a>
        </div>
    </header>
    
    <div>
        <a href="/"><img src="/images/logo-siw.png" width="50%"/></a>
    </div>

    <h1>Aggiungi una ricetta</h1>

    <form th:action="@{/recipe}" method="POST" th:object="${recipe}">
        <!-- Errori globali -->
        <div th:if="${#fields.hasGlobalErrors()}">
            <p th:each="err : ${#fields.globalErrors()}" th:text="${err}"></p> 
        </div>

        <!-- Titolo -->
        <div>
            <label>Titolo:</label>
            <input type="text" th:field="*{title}" />
            <span th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></span>
        </div>

        <!-- Descrizione -->
        <div>
            <label>Descrizione:</label>
            <textarea th:field="*{description}"></textarea>
            <span th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></span>
        </div>

        <!-- Tempo di preparazione -->
        <div>
            <label>Tempo di preparazione (minuti):</label>
            <input type="number" th:field="*{preparationTime}" min="1" />
            <span th:if="${#fields.hasErrors('preparationTime')}" th:errors="*{preparationTime}"></span>
        </div>

        <!-- Difficoltà -->
        <div>
            <label>Difficoltà:</label>
            <input type="text" th:field="*{difficulty}" />
            <span th:if="${#fields.hasErrors('difficulty')}" th:errors="*{difficulty}"></span>
        </div>

        <!-- URL immagine -->
        <div>
            <label>URL immagine:</label>
            <input type="text" th:field="*{imageUrl}" />
            <span th:if="${#fields.hasErrors('imageUrl')}" th:errors="*{imageUrl}"></span>
        </div>

        <!-- Porzioni -->
        <div>
            <label>Porzioni:</label>
            <input type="number" th:field="*{servings}" min="1" />
            <span th:if="${#fields.hasErrors('servings')}" th:errors="*{servings}"></span>
        </div>

        <!-- Pulsante di submit -->
        <div>
            <button type="submit">Conferma</button>
        </div>
    </form>
</body>

</html>
